openapi: 3.0.3
info:
  title: Admin Companies API
  version: 1.0.0
  description: Endpoints for admin company list and detail views
servers:
  - url: https://api.example.com
paths:
  /admin/companies:
    get:
      summary: List companies (admin)
      parameters:
        - in: query
          name: page
          schema: { type: integer, minimum: 1, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, enum: [10,25,50], default: 25 }
        - in: query
          name: search
          description: Case-insensitive substring match on name or code
          schema: { type: string, maxLength: 100 }
        - in: query
          name: sort
          description: Sort key and order
          schema: { type: string, enum: ["name:desc"] , default: "name:desc"}
        - in: query
          name: type
          description: Company type filter
          schema: { type: string }
        - in: query
          name: registry
          description: Registry filter
          schema: { type: string }
      responses:
        '200':
          description: Paged list of companies
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/CompanyListItem'
                  page:
                    type: integer
                  pageSize:
                    type: integer
                  total:
                    type: integer
        '400':
          description: Invalid query params
  /admin/companies/{companyId}:
    get:
      summary: Get company detail (admin)
      parameters:
        - in: path
          name: companyId
          required: true
          schema: { type: string, format: uuid }
      responses:
        '200':
          description: Company detail
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompanyDetail'
        '404':
          description: Not found
  /admin/companies/{companyId}/submissions:
    get:
      summary: List submissions for company (admin)
      parameters:
        - in: path
          name: companyId
          required: true
          schema: { type: string, format: uuid }
        - in: query
          name: page
          schema: { type: integer, minimum: 1, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, enum: [10,25,50], default: 25 }
        - in: query
          name: sort
          schema: { type: string, enum: ["submittedAt:desc"], default: "submittedAt:desc" }
      responses:
        '200':
          description: Paged list of submissions for a company
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/CompanySubmission'
                  page:
                    type: integer
                  pageSize:
                    type: integer
                  total:
                    type: integer
        '404':
          description: Company not found

components:
  schemas:
    CompanyListItem:
      type: object
      properties:
        id: { type: string, format: uuid }
        name: { type: string }
        code: { type: string }
        type: { type: string }
        address: { type: string }
        eDeliveryAddress: { type: string }
    CompanyDetail:
      allOf:
        - $ref: '#/components/schemas/CompanyListItem'
        - type: object
          properties:
            legalForm: { type: string }
            registry: { type: string }
    CompanySubmission:
      type: object
      properties:
        id: { type: string, format: uuid }
        dateFrom: { type: string, format: date }
        dateTo: { type: string, format: date }
        womenPercent: { type: number, minimum: 0, maximum: 100 }
        menPercent: { type: number, minimum: 0, maximum: 100 }
        requirementsApplied: { type: boolean }
        submitterEmail: { type: string, format: email }
        submittedAt: { type: string, format: date-time }
